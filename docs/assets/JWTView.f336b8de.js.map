{"version":3,"file":"JWTView.f336b8de.js","sources":["../../src/store/jwt.ts","../../src/views/encryption/JWTView.vue"],"sourcesContent":["import { ref } from 'vue'\r\nimport { createPinia, defineStore } from 'pinia'\r\n\r\n// 不能直接导出使用（需要设置订阅修改$subscribe、自定义获取数据$state的方法）\r\nconst jwtDefineStore = defineStore('jwt', {\r\n  state: () => ({\r\n    token: ref<string>('eyJhbGciOiJSUzI1NiJ9.eyJVU0VSU19JRCI6MSwic3ViIjoieHV4aWFvd2VpIiwiYXVkIjoieHV4aWFvd2VpX2NsaWVudF9pZCIsIm5iZiI6MTY1OTY3ODIwNywic2NvcGUiOlsic25zYXBpX2Jhc2UiXSwiaXNzIjoiaHR0cDpcL1wvMTcyLjE2LjU2LjIwNzoxNDAxIiwiZXhwIjoxNjU5NzIxNDA3LCJpYXQiOjE2NTk2NzgyMDcsImF1dGhvcml0aWVzIjpbIm1hbmFnZV91c2VyX2RlbGV0ZSIsInNuc2FwaV9iYXNlIiwidXNlcl9vYXV0aDJfdXNlckF1dGhlbnRpY2F0aW9uIiwidXNlcl9kZXRhaWxzIiwibWFuYWdlX2NsaWVudF9lZGl0IiwidXNlcl9vYXV0aDJfb2F1dGgyUmVxdWVzdCIsImF1ZGl0X2F1dGhvcml6YXRpb25fZGVsZXRlIiwiYXVkaXRfYXV0aG9yaXphdGlvbl9jb25zZW50X2RlbGV0ZSIsImF1ZGl0X2F1dGhvcml6YXRpb25fY29uc2VudF9yZWFkIiwibWFuYWdlX3VzZXJfYWRkIiwibWFuYWdlX3VzZXJfcmVhZCIsInVzZXJuYW1lX3Rva2VuX2RlbGV0ZSIsImNsaWVudElkX3Rva2VuX2RlbGV0ZSIsIm1hbmFnZV91c2VyX2F1dGhvcml0eSIsInVzZXJfaW5mbyIsImF1ZGl0X2F1dGhvcml6YXRpb25fcmVhZCIsIm1hbmFnZV9jbGllbnRfYWRkIiwibWFuYWdlX2NsaWVudF9kZWxldGUiLCJtYW5hZ2VfY2xpZW50X3JlYWQiLCJ1c2VyX2F1dGhvcml0aWVzIiwibWFuYWdlX3VzZXJfZWRpdCJdLCJ1c2VybmFtZSI6Inh1eGlhb3dlaSJ9.Bb82mwwy8Df9i_0vjs_YN9Se_uc8DYfkWDOjrtsPGWUw3JtcGro9JOUD_8O5xEz4PaCT9cCY4LJEUMzSIH3sGMYcUdtsma6qfNXHxgdguqgbCwkWUYaVGTKBuxcZhByX2K1r5X2qmD05zfdPwBMt7qsCxE83u6Xm2GO5j39BlDwuVHJ9-i1BYMBG6vNH-mcPkdG4EV9DNjHmkv5zW2J7cwIb8sT-8QXUv246nT8pOru8ZvUCa0_rAj6RXo0mJWkkR4TFBBwWs22tMfFUbeQ-hmCY8hn07R6bEI8JrQG8PENORKwmcu8_I2QzMLUvR3lmI8mvKPjmqH4Mek9bOOFh3Q'), // Token\r\n    format: ref<boolean>(true) // format\r\n  }),\r\n  getters: {\r\n\r\n  },\r\n  actions: {\r\n    /**\r\n     * token\r\n     * @param token\r\n     */\r\n    setToken (token: string) {\r\n      this.token = token\r\n    },\r\n    /**\r\n     * format\r\n     * @param format\r\n     */\r\n    setFormat (format: boolean) {\r\n      this.format = format\r\n    }\r\n  }\r\n})\r\n\r\nconst jwtStore = jwtDefineStore(createPinia())\r\n\r\n// 订阅缓存的修改\r\njwtStore.$subscribe((mutation, state) => {\r\n  // 将缓存的修改放入本地缓存中\r\n  localStorage.setItem(jwtStore.$id, JSON.stringify({ ...state }))\r\n})\r\n\r\n// 获取历史缓存\r\nconst jwtStoreOld = localStorage.getItem(jwtStore.$id)\r\nif (jwtStoreOld) {\r\n  // 返回已存在的缓存\r\n  jwtStore.$state = JSON.parse(jwtStoreOld)\r\n}\r\n\r\n// 注意，在使用时，不用构造方法，直接调用即可\r\nexport default jwtStore\r\n","<template>\r\n  <el-row justify=\"center\">\r\n    <el-col :span=\"22\" class=\"text-center\">\r\n      <h1>JWT</h1>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"22\">\r\n      <el-button @click=\"decode\" class=\"decode-button\">解码</el-button>\r\n      <el-select v-model=\"format\" placeholder=\"是否格式化\" class=\"decode-select w-100px\">\r\n        <el-option label=\"格式化\" :value=\"true\"/>\r\n        <el-option label=\"不格式化\" :value=\"false\"/>\r\n      </el-select>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"22\">\r\n      <el-input v-model=\"token\" class=\"token-input\" placeholder=\"token\" type=\"textarea\" @dblclick=\"dblclick\"\r\n                rows=\"8\" data-dblclick=\"token已复制到剪贴板\"/>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"alg\" @dblclick=\"dblclick\" readonly data-dblclick=\"加密方式 alg 已复制到剪贴板\">\r\n        <template #prepend>\r\n          <span>加密方式 alg</span>\r\n        </template>\r\n      </el-input>\r\n    </el-col>\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"issuer\" @dblclick=\"dblclick\" readonly data-dblclick=\"签发者 issuer、iss 已复制到剪贴板\">\r\n        <template #prepend>\r\n          <span>签发者 issuer、iss</span>\r\n        </template>\r\n      </el-input>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"11\">\r\n      <el-tooltip class=\"box-item\" effect=\"dark\" :content=\"issuedAttooltip\" placement=\"top-end\"\r\n                  :disabled=\"issuedAt === ''\">\r\n        <el-input v-model=\"issuedAt\" @dblclick=\"dblclick\" readonly data-dblclick=\"签发时间 issuedAt、iat 已复制到剪贴板\">\r\n          <template #prepend>\r\n            <span>签发时间 issuedAt、iat</span>\r\n          </template>\r\n        </el-input>\r\n      </el-tooltip>\r\n    </el-col>\r\n    <el-col :span=\"11\">\r\n      <el-tooltip class=\"box-item\" effect=\"dark\" :content=\"expirationAttooltip\" placement=\"top-end\"\r\n                  :disabled=\"expiration === ''\">\r\n        <el-input v-model=\"expiration\" @dblclick=\"dblclick\" readonly\r\n                  data-dblclick=\"过期时间 expiration、exp 已复制到剪贴板\">\r\n          <template #prepend>\r\n            <span>过期时间 expiration、exp</span>\r\n          </template>\r\n        </el-input>\r\n      </el-tooltip>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"audience\" @dblclick=\"dblclick\" readonly data-dblclick=\"观众 audience、aud 已复制到剪贴板\">\r\n        <template #prepend>\r\n          <span>观众 audience、aud</span>\r\n        </template>\r\n      </el-input>\r\n    </el-col>\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"subject\" @dblclick=\"dblclick\" readonly data-dblclick=\"主题 subject、sub 已复制到剪贴板\">\r\n        <template #prepend>\r\n          <span>主题 subject、sub</span>\r\n        </template>\r\n      </el-input>\r\n    </el-col>\r\n  </el-row>\r\n\r\n  <br>\r\n\r\n  <el-row justify=\"center\" :gutter=\"20\">\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"headerShow\" class=\"token-input\" placeholder=\"header\" type=\"textarea\" @dblclick=\"dblclick\"\r\n                rows=\"10\" data-dblclick=\"header已复制到剪贴板\"/>\r\n    </el-col>\r\n    <el-col :span=\"11\">\r\n      <el-input v-model=\"payloadShow\" class=\"token-input\" placeholder=\"payload\" type=\"textarea\" @dblclick=\"dblclick\"\r\n                rows=\"10\" data-dblclick=\"payload已复制到剪贴板\"/>\r\n    </el-col>\r\n  </el-row>\r\n\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus/es'\r\nimport dblclick from '../../utils/clipboard'\r\nimport jwtStore from '../../store/jwt'\r\n\r\nconst token = ref<string>(jwtStore.token)\r\nwatch(() => token.value, (newValue, oldValue) => {\r\n  jwtStore.setToken(newValue)\r\n})\r\n\r\n// 头部\r\nconst header = ref<string>('')\r\n// 头部：显示\r\nconst headerShow = ref<string>('')\r\n\r\n// 载荷\r\nconst payload = ref<string>('')\r\n// 载荷：显示\r\nconst payloadShow = ref<string>('')\r\n\r\n// 加密方式\r\nconst alg = ref<string>('')\r\n// 签发者：issuer、iss\r\nconst issuer = ref<string>('')\r\n\r\n// 签发时间：issuedAt、iat\r\nconst issuedAt = ref<string | number>('')\r\n// 签发时间：鼠标覆盖展示\r\nconst issuedAttooltip = ref('')\r\nwatch(() => issuedAt.value, (newValue: number | string, oldValue: number | string) => {\r\n  if (typeof newValue === 'number') {\r\n    issuedAttooltip.value = new Date(newValue * 1000).toLocaleString()\r\n  }\r\n})\r\n\r\n// 过期时间\r\nconst expiration = ref<string>('')\r\n// 过期时间：鼠标覆盖展示\r\nconst expirationAttooltip = ref<string>('')\r\nwatch(() => expiration.value, (newValue: number | string, oldValue: number | string) => {\r\n  if (typeof newValue === 'number') {\r\n    expirationAttooltip.value = new Date(newValue * 1000).toLocaleString()\r\n  }\r\n})\r\n\r\n// 观众\r\nconst audience = ref<string>('')\r\n// 主题\r\nconst subject = ref<string>('')\r\n\r\n// 格式化\r\nconst format = ref<boolean>(jwtStore.format)\r\nwatch(() => format.value, (newValue, oldValue) => {\r\n  jwtStore.setFormat(newValue)\r\n\r\n  show(newValue)\r\n})\r\n\r\n// 解密\r\nconst decode = () => {\r\n  if (token.value === '') {\r\n    ElMessage.error('token不能为空')\r\n    return\r\n  }\r\n\r\n  const tokenSplit = token.value?.split('.')\r\n  if (tokenSplit?.length >= 1) {\r\n    try {\r\n      header.value = window.atob(tokenSplit[0])\r\n    } catch (e) {\r\n      headerShow.value = ''\r\n      console.error('解密header时异常', e)\r\n      ElMessage.error('解密header时异常')\r\n    }\r\n  } else {\r\n    ElMessage.error('未找到header')\r\n  }\r\n\r\n  if (tokenSplit?.length >= 2) {\r\n    try {\r\n      payload.value = window.atob(tokenSplit[1])\r\n    } catch (e) {\r\n      payloadShow.value = ''\r\n      console.error('解密payload时异常', e)\r\n      ElMessage.error('解密payload时异常')\r\n    }\r\n  } else {\r\n    ElMessage.error('未找到payload')\r\n  }\r\n\r\n  show(format.value)\r\n}\r\n\r\n// 展示\r\nconst show = (boo: boolean) => {\r\n  if (boo) {\r\n    try {\r\n      headerShow.value = JSON.stringify(JSON.parse(header.value), null, '\\t')\r\n    } catch (e) {\r\n      console.error('格式化header异常', e)\r\n      ElMessage.error('格式化header异常')\r\n    }\r\n    try {\r\n      payloadShow.value = JSON.stringify(JSON.parse(payload.value), null, '\\t')\r\n    } catch (e) {\r\n      console.error('格式化payload异常', e)\r\n      ElMessage.error('格式化payload异常')\r\n    }\r\n  } else {\r\n    headerShow.value = header.value\r\n    payloadShow.value = payload.value\r\n  }\r\n\r\n  try {\r\n    alg.value = JSON.parse(header.value).alg\r\n  } catch (e) {\r\n    console.error('提取加密方式 alg 异常', e)\r\n  }\r\n\r\n  try {\r\n    issuer.value = JSON.parse(payload.value).issuer || JSON.parse(payload.value).iss\r\n  } catch (e) {\r\n    console.error('提取签发者 issuer、iss 异常', e)\r\n  }\r\n\r\n  try {\r\n    issuedAt.value = JSON.parse(payload.value).issuedAt || JSON.parse(payload.value).iat\r\n  } catch (e) {\r\n    console.error('提取签发时间 issuedAt、iat 异常', e)\r\n  }\r\n\r\n  try {\r\n    expiration.value = JSON.parse(payload.value).expiration || JSON.parse(payload.value).exp\r\n  } catch (e) {\r\n    console.error('提取过期时间 expiration、exp 异常', e)\r\n  }\r\n\r\n  try {\r\n    audience.value = JSON.parse(payload.value).audience || JSON.parse(payload.value).aud\r\n  } catch (e) {\r\n    console.error('提取观众 audience、aud 异常', e)\r\n  }\r\n\r\n  try {\r\n    subject.value = JSON.parse(payload.value).subject || JSON.parse(payload.value).sub\r\n  } catch (e) {\r\n    console.error('提取主题 subject、sub 异常', e)\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n.decode-button {\r\n  // 右上角半径：0\r\n  border-top-right-radius: 0;\r\n  // 右下角半径：0\r\n  border-bottom-right-radius: 0;\r\n}\r\n\r\n.decode-select .el-input__wrapper {\r\n  // 左上角半径：0\r\n  border-top-left-radius: 0;\r\n  // 左下角半径：0\r\n  border-bottom-left-radius: 0;\r\n}\r\n\r\n</style>\r\n\r\n<style scoped>\r\n\r\n.decode-button {\r\n  width: calc(100% - 100px);\r\n}\r\n\r\n</style>\r\n"],"names":["jwtDefineStore","defineStore","ref","token","format","jwtStore","createPinia","mutation","state","jwtStoreOld","watch","newValue","oldValue","header","headerShow","payload","payloadShow","alg","issuer","issuedAt","issuedAttooltip","expiration","expirationAttooltip","audience","subject","show","decode","ElMessage","tokenSplit","_a","e","boo"],"mappings":"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"}