import{o as Ee,am as Ae,x as be,v as Ce,G as le,an as ke,n as he,j as Y,ao as Le,a9 as _,A as V,D as Ie,X as ie,d as Me,b as w,C as se,ap as Te,r as L,N as Re,s as I,aq as Oe,z as Ne,ar as R,a as c,m as b,w as v,a6 as ee,a7 as ne,e as y,K as u,M as ue,a8 as j,c as oe,J as q,L as O,t as H,ac as W,l as te,ae as De,B as $e,ai as Z,ak as Se,as as de,aa as ze}from"./index.2dbaad55.js";import{g as He,E as Ve,a as Ye,i as Ue,b as Ke}from"./el-button.b21c14f9.js";import{j as ce,t as Xe,r as fe,s as me,v as Pe,w as Ge,a as je,E as qe,g as We,o as Ze,p as Je,T as pe,x as ve,f as Qe,y as Fe}from"./el-input.4c92a3f9.js";const xe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',_e=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,ye=e=>Array.from(e.querySelectorAll(xe)).filter(n=>en(n)&&_e(n)),en=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};var J=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(J||{});const nn=(e,n,t)=>{let l={offsetX:0,offsetY:0};const s=d=>{const f=d.clientX,g=d.clientY,{offsetX:m,offsetY:h}=l,r=e.value.getBoundingClientRect(),p=r.left,D=r.top,M=r.width,A=r.height,K=document.documentElement.clientWidth,Q=document.documentElement.clientHeight,F=-p+m,T=-D+h,X=K-p-M+m,x=Q-D-A+h,P=$=>{const G=Math.min(Math.max(m+$.clientX-f,F),X),z=Math.min(Math.max(h+$.clientY-g,T),x);l={offsetX:G,offsetY:z},e.value.style.transform=`translate(${ce(G)}, ${ce(z)})`},S=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",S)},a=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",s)},o=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",s)};Ee(()=>{Ae(()=>{t.value?a():o()})}),be(()=>{o()})},on=e=>{Ce(e)||Xe("[useLockscreen]","You need to pass a ref param to this function");const n=le("popup"),t=ke(()=>n.bm("parent","hidden"));if(!he||fe(document.body,t.value))return;let l=0,s=!1,a="0",o=0;const d=()=>{Ge(document.body,t.value),s&&(document.body.style.paddingRight=a)};Y(e,f=>{if(!f){d();return}s=!fe(document.body,t.value),s&&(a=document.body.style.paddingRight,o=Number.parseInt(me(document.body,"paddingRight"),10)),l=He(n.namespace.value);const g=document.documentElement.clientHeight<document.body.scrollHeight,m=me(document.body,"overflowY");l>0&&(g||m==="scroll")&&s&&(document.body.style.paddingRight=`${o+l}px`),Pe(document.body,t.value)}),Le(()=>d())},tn=(e,n)=>{let t;Y(()=>e.value,l=>{var s,a;l?(t=document.activeElement,Ce(n)&&((a=(s=n.value).focus)==null||a.call(s))):t.focus()})},we=e=>{if(!e)return{onClick:_,onMousedown:_,onMouseup:_};let n=!1,t=!1;return{onClick:o=>{n&&t&&e(o),n=t=!1},onMousedown:o=>{n=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}},ae="_trap-focus-children",B=[],ge=e=>{if(B.length===0)return;const n=B[B.length-1][ae];if(n.length>0&&e.code===je.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const t=e.shiftKey,l=e.target===n[0],s=e.target===n[n.length-1];l&&t&&(e.preventDefault(),n[n.length-1].focus()),s&&!t&&(e.preventDefault(),n[0].focus())}},sn={beforeMount(e){e[ae]=ye(e),B.push(e),B.length<=1&&document.addEventListener("keydown",ge)},updated(e){V(()=>{e[ae]=ye(e)})},unmounted(){B.shift(),B.length===0&&document.removeEventListener("keydown",ge)}},an=Ie({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:ie([String,Array,Object])},zIndex:{type:ie([String,Number])}}),ln={click:e=>e instanceof MouseEvent};var rn=Me({name:"ElOverlay",props:an,emits:ln,setup(e,{slots:n,emit:t}){const l=le("overlay"),s=f=>{t("click",f)},{onClick:a,onMousedown:o,onMouseup:d}=we(e.customMaskEvent?void 0:s);return()=>e.mask?w("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:o,onMouseup:d},[se(n,"default")],J.STYLE|J.CLASS|J.PROPS,["onClick","onMouseup","onMousedown"]):Te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[se(n,"default")])}});const un=rn,dn=Me({name:"ElMessageBox",directives:{TrapFocus:sn},components:{ElButton:Ve,ElFocusTrap:Ye,ElInput:qe,ElOverlay:un,ElIcon:We,...Ze},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ue},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t}=Ke(),l=le("message-box"),s=L(!1),{nextZIndex:a}=Je(),o=Re({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),d=I(()=>{const i=o.type;return{[l.bm("icon",i)]:i&&pe[i]}}),f=ve(),g=ve(),m=Qe(I(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),h=I(()=>o.icon||pe[o.type]||""),r=I(()=>!!o.message),p=L(),D=L(),M=L(),A=L(),K=L(),Q=I(()=>o.confirmButtonClass);Y(()=>o.inputValue,async i=>{await V(),e.boxType==="prompt"&&i!==null&&$()},{immediate:!0}),Y(()=>s.value,i=>{var E,k;i&&(e.boxType!=="prompt"&&(o.autofocus?M.value=(k=(E=K.value)==null?void 0:E.$el)!=null?k:p.value:M.value=p.value),o.zIndex=a()),e.boxType==="prompt"&&(i?V().then(()=>{var re;A.value&&A.value.$el&&(o.autofocus?M.value=(re=G())!=null?re:p.value:M.value=p.value)}):(o.editorErrorMessage="",o.validateError=!1))});const F=I(()=>e.draggable);nn(p,D,F),Ee(async()=>{await V(),e.closeOnHashChange&&window.addEventListener("hashchange",T)}),be(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",T)});function T(){!s.value||(s.value=!1,V(()=>{o.action&&n("action",o.action)}))}const X=()=>{e.closeOnClickModal&&S(o.distinguishCancelAndClose?"close":"cancel")},x=we(X),P=i=>{if(o.inputType!=="textarea")return i.preventDefault(),S("confirm")},S=i=>{var E;e.boxType==="prompt"&&i==="confirm"&&!$()||(o.action=i,o.beforeClose?(E=o.beforeClose)==null||E.call(o,i,o,T):T())},$=()=>{if(e.boxType==="prompt"){const i=o.inputPattern;if(i&&!i.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||t("el.messagebox.error"),o.validateError=!0,!1;const E=o.inputValidator;if(typeof E=="function"){const k=E(o.inputValue);if(k===!1)return o.editorErrorMessage=o.inputErrorMessage||t("el.messagebox.error"),o.validateError=!0,!1;if(typeof k=="string")return o.editorErrorMessage=k,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},G=()=>{const i=A.value.$refs;return i.input||i.textarea},z=()=>{S("close")},Be=()=>{e.closeOnPressEscape&&z()};return e.lockScroll&&on(s),tn(s),{...Oe(o),ns:l,overlayEvent:x,visible:s,hasMessage:r,typeClass:d,contentId:f,inputId:g,btnSize:m,iconComponent:h,confirmButtonClasses:Q,rootRef:p,focusStartRef:M,headerRef:D,inputRef:A,confirmRef:K,doClose:T,handleClose:z,onCloseRequested:Be,handleWrapperClick:X,handleInputEnter:P,handleAction:S,t}}}),cn=["aria-label","aria-describedby"],fn=["aria-label"],mn=["id"];function pn(e,n,t,l,s,a){const o=R("el-icon"),d=R("close"),f=R("el-input"),g=R("el-button"),m=R("el-focus-trap"),h=R("el-overlay");return c(),b(De,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish")),persisted:""},{default:v(()=>[ee(w(h,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:v(()=>[y("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[w(m,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:v(()=>[y("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ue(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=j(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(c(),oe("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[y("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(c(),b(o,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:v(()=>[(c(),b(q(e.iconComponent)))]),_:1},8,["class"])):O("v-if",!0),y("span",null,H(e.title),1)],2),e.showClose?(c(),oe("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=W(j(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[w(o,{class:u(e.ns.e("close"))},{default:v(()=>[w(d)]),_:1},8,["class"])],42,fn)):O("v-if",!0)],2)):O("v-if",!0),y("div",{id:e.contentId,class:u(e.ns.e("content"))},[y("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(c(),b(o,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:v(()=>[(c(),b(q(e.iconComponent)))]),_:1},8,["class"])):O("v-if",!0),e.hasMessage?(c(),oe("div",{key:1,class:u(e.ns.e("message"))},[se(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(c(),b(q(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(c(),b(q(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:v(()=>[te(H(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):O("v-if",!0)],2),ee(y("div",{class:u(e.ns.e("input"))},[w(f,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:W(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),y("div",{class:u(e.ns.e("errormsg")),style:ue({visibility:e.editorErrorMessage?"visible":"hidden"})},H(e.editorErrorMessage),7)],2),[[ne,e.showInput]])],10,mn),y("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(c(),b(g,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=W(j(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:v(()=>[te(H(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):O("v-if",!0),ee(w(g,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=W(j(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:v(()=>[te(H(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[ne,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,cn)]),_:3},8,["z-index","overlay-class","mask"]),[[ne,e.visible]])]),_:3})}var vn=Ne(dn,[["render",pn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const U=new Map,yn=(e,n,t=null)=>{const l=Te(vn,e);return l.appContext=t,Se(l,n),document.body.appendChild(n.firstElementChild),l.component},gn=()=>document.createElement("div"),En=(e,n)=>{const t=gn();e.onVanish=()=>{Se(null,t),U.delete(s)},e.onAction=a=>{const o=U.get(s);let d;e.showInput?d={value:s.inputValue,action:a}:d=a,e.callback?e.callback(d,l.proxy):a==="cancel"||a==="close"?e.distinguishCancelAndClose&&a!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(d)};const l=yn(e,t,n),s=l.proxy;for(const a in e)de(e,a)&&!de(s.$props,a)&&(s[a]=e[a]);return Y(()=>s.message,(a,o)=>{Z(a)?l.slots.default=()=>[a]:Z(o)&&!Z(a)&&delete l.slots.default},{immediate:!0}),s.visible=!0,s};function N(e,n=null){if(!he)return Promise.reject();let t;return $e(e)||Z(e)?e={message:e}:t=e.callback,new Promise((l,s)=>{const a=En(e,n!=null?n:N._context);U.set(a,{options:e,callback:t,resolve:l,reject:s})})}const bn=["alert","confirm","prompt"],Cn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};bn.forEach(e=>{N[e]=hn(e)});function hn(e){return(n,t,l,s)=>{let a;return ze(t)?(l=t,a=""):Fe(t)?a="":a=t,N(Object.assign({title:a,message:n,type:"",...Cn[e]},l,{boxType:e}),s)}}N.close=()=>{U.forEach((e,n)=>{n.doClose()}),U.clear()};N._context=null;const C=N;C.install=e=>{C._context=e._context,e.config.globalProperties.$msgbox=C,e.config.globalProperties.$messageBox=C,e.config.globalProperties.$alert=C.alert,e.config.globalProperties.$confirm=C.confirm,e.config.globalProperties.$prompt=C.prompt};const wn=C;export{wn as E};
//# sourceMappingURL=index.aa555839.js.map
